<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qu·∫£n l√Ω ƒë∆°n h√†ng</title>
    <!-- <link href="../../styles/style.css" rel="stylesheet" type="text/css" /> -->
    <link rel="stylesheet" href="../../styles/headerStyle.css" />
    <link rel="stylesheet" href="../../styles/manageBooksStyle.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />

    <!-- <script src="../../scripts/script.js" defer></script> -->
    <script src="../../scripts/headerStaffScript.js" defer></script>
    <script src="../../scripts/manageOrders.js" defer></script>
  </head>

  <body>
    <%- include('partial/headerAdmin') %>
    <div class="search-container">
      <form action="search" id="form">
        <input type="search" id="search-area" name="q" placeholder="Search" />
        <button><span>üîç</span></button>
      </form>
    </div>
    <!-- List Books -->
    <div class="table-container">
      <h1>Danh s√°ch ƒë∆°n h√†ng</h1>
      <table>
        <thead>
          <tr>
            <th style="width: 20px">STT</th>
            <th style="width: 175px">M√£ ƒë∆°n h√†ng</th>
            <th style="width: 175px">M√£ kh√°ch h√†ng</th>
            <th style="width: 175px">ƒê·ªãa ch·ªâ</th>
            <th style="width: 200px">Ng√†y ƒë·∫∑t h√†ng</th>
            <th style="width: 150px">Tr·∫°ng th√°i</th>
            <th style="width: 150px">Gi√°</th>
            <th style="width: 40px"></th>
          </tr>
        </thead>
        <tbody>
          <% orders.forEach((order, index) => { %>
          <tr>
            <td><%= (currentPage - 1) * 20 + index + 1 %></td>
            <td><%= order.order_id %></td>
            <td><%= order.customer_id %></td>
            <td><%= order.address %></td>
            <td><%= new Date(order.date).toLocaleString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' }) %></td>
            <td><%= order.status %></td>
            <td><%= order.original_price %></td>
            <td>
              <button class="edit-btn" data-order-id="<%= order.order_id %>">
                <i class="fas fa-edit"></i> S·ª≠a
              </button>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
      <!-- Pagination -->
      <div class="pagination">
        <% if (currentPage > 1) { %>
        <a href="?page=<%= currentPage - 1 %>">Trang tr∆∞·ªõc</a>
        <% } %>

        <a href="?page=1">1</a>

        <% if (currentPage > 4) { %>
        <span>...</span>
        <% } %> <% for (let i = currentPage - 2; i <= currentPage + 2; i++) { %>
        <% if (i > 1 && i < totalPages) { %>
        <a
          href="?page=<%= i %>"
          class="<%= i === currentPage ? 'active' : '' %>"
          ><%= i %></a
        >
        <% } %> <% } %> <% if (currentPage < totalPages - 3) { %>
        <span>...</span>
        <% } %> <% if (totalPages > 1) { %>
        <a href="?page=<%= totalPages %>"><%= totalPages %></a>
        <% } %> <% if (currentPage < totalPages) { %>
        <a href="?page=<%= currentPage + 1 %>">Trang sau</a>
        <% } %>
      </div>
    </div>
  
    <div id="confirmation-edit-box" class="hidden">
      <div class="confirmation-content">
        <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën c·∫≠p nh·∫≠t ƒë∆°n h√†ng n√†y?</p>
        <button id="confirm-edit" class="confirm-btn">S·ª≠a</button>
        <button id="cancel-edit" class="cancel-btn">H·ªßy</button>
      </div>
    </div>
  </body>
</html>